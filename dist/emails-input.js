!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).EmailsInput=n()}(this,(function(){"use strict";function e(e){var n=document.createElement("template");return n.innerHTML=e.trim(),n.firstChild||n.content.firstChild}function n(e,n){void 0===n&&(n=0);var t=Math.ceil(n),i=Math.floor(e);return Math.floor(Math.random()*(i-t)+n)}function t(e){return!!e.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/g)}function i(e){return e.trim()}function a(e){return!!e}function o(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}var r;function l(e){return{value:i(e),isValid:t(e),createdAt:(new Date).getTime()}}function u(e,n){return e.createdAt<n.createdAt?-1:e.createdAt>n.createdAt?1:0}return function(e){e.ADD_NEW_EMAIL="ADD_NEW_EMAIL",e.REMOVE_EMAIL="REMOVE_EMAIL",e.ADD_RANDOM_EMAIL="ADD_RANDOM_EMAIL",e.ALERT_EMAILS_SIZE="ALERT_EMAILS_SIZE",e.EMAILS_LIST_UPDATED="EMAILS_LIST_UPDATED",e.EMAIL_CONTAINER_CLICKED="EMAIL_CONTAINER_CLICKED",e.REMOVE_LAST_EMAIL="REMOVE_LAST_EMAIL"}(r||(r={})),function(t){var c,s=function(){var e={};return{subscribe:function(n,t){var i=e[n]||[];i.push(t),e[n]=i},publish:function(n,t){e[n]&&e[n].forEach((function(e){e(t)}))}}}(),d=(c=s,{emailsUpdated:{subscribe:function(e){c.subscribe(r.EMAILS_LIST_UPDATED,e)},publish:function(e){c.publish(r.EMAILS_LIST_UPDATED,e)}},emailContainerClicked:{subscribe:function(e){c.subscribe(r.EMAIL_CONTAINER_CLICKED,e)},publish:function(){c.publish(r.EMAIL_CONTAINER_CLICKED,null)}},addNewEmail:{publish:function(e){c.publish(r.ADD_NEW_EMAIL,e)},subscribe:function(e){c.subscribe(r.ADD_NEW_EMAIL,e)}},addRandomEmail:{publish:function(){c.publish(r.ADD_RANDOM_EMAIL,null)},subscribe:function(e){c.subscribe(r.ADD_RANDOM_EMAIL,e)}},removeLastEmail:{publish:function(){c.publish(r.REMOVE_LAST_EMAIL,null)},subscribe:function(e){c.subscribe(r.REMOVE_LAST_EMAIL,e)}},removeEmail:{publish:function(e){c.publish(r.REMOVE_EMAIL,e)},subscribe:function(e){c.subscribe(r.REMOVE_EMAIL,e)}},alertEmailsSize:{publish:function(){c.publish(r.ALERT_EMAILS_SIZE,null)},subscribe:function(e){c.subscribe(r.ALERT_EMAILS_SIZE,e)}}}),m=function(e){var t=[];function o(n){t=n.sort(u),e.emailsUpdated.publish(t)}function r(e){var n=e.split(",").map(i).filter(a).map(l);n.length>0&&o(t.concat(n))}return{add:r,size:function(){return t.filter((function(e){return e.isValid})).length},addRandom:function(){var e,t;r((e=["gmail.com","yahoo.com","hotmail.com","aol.com","hotmail.co.uk","hotmail.fr","msn.com","yahoo.fr","wanadoo.fr","orange.fr","comcast.net","yahoo.co.uk","yahoo.com.br","yahoo.co.in","live.com","rediffmail.com","free.fr","gmx.de","web.de","yandex.ru","ymail.com","libero.it","outlook.com","uol.com.br","bol.com.br","mail.ru","cox.net","hotmail.it","sbcglobal.net","sfr.fr","live.fr","verizon.net","live.co.uk","googlemail.com","yahoo.es","ig.com.br","live.nl","bigpond.com","terra.com.br","yahoo.it","neuf.fr","yahoo.de","alice.it","rocketmail.com","att.net","laposte.net","facebook.com","bellsouth.net","yahoo.in","hotmail.es","charter.net","yahoo.ca","yahoo.com.au","rambler.ru","hotmail.de","tiscali.it","shaw.ca","yahoo.co.jp","sky.com","earthlink.net","optonline.net","freenet.de","t-online.de","aliceadsl.fr","virgilio.it","home.nl","qq.com","telenet.be","me.com","yahoo.com.ar","tiscali.co.uk","yahoo.com.mx","voila.fr","gmx.net","mail.com","planet.nl","tin.it","live.it","ntlworld.com","arcor.de","yahoo.co.id","frontiernet.net","hetnet.nl","live.com.au","yahoo.com.sg","zonnet.nl","club-internet.fr","juno.com","optusnet.com.au","blueyonder.co.uk","bluewin.ch","skynet.be","sympatico.ca","windstream.net","mac.com","centurytel.net","chello.nl","live.ca","aim.com","bigpond.net.au"],t="abcdefghijklmnopqrstuvwj12345",function(){for(var e="",i=n(12,2),a=0;a<i;a++)e+=t.charAt(n(t.length));return e}()+"@"+e[n(e.length)]))},remove:function(e){o(t.filter((function(n){return n.value!==e})))},removeLast:function(){var e=[].concat(t).sort(u);e.pop(),o(e)},list:function(){return[].concat(t)}}}(d);d.addRandomEmail.subscribe((function(){m.addRandom()})),d.addNewEmail.subscribe((function(e){m.add(e)})),d.removeLastEmail.subscribe((function(){m.removeLast()})),d.removeEmail.subscribe((function(e){m.remove(e)})),d.alertEmailsSize.subscribe((function(){alert("Total emails: "+m.size())}));var f=function(n){var t=e('<section class="emails-input__card" data-name="emails-input"></section>'),i=function(n){var t=e('<footer class="emails-input__actions-container"></footer>'),i=e('<button class="emails-input__button" type="button">Add email</button>');i.addEventListener("mousedown",(function(e){n.addRandomEmail.publish(),e.preventDefault()}));var a=e('<button class="emails-input__button" type="button">Get emails count</button>');return a.addEventListener("mousedown",(function(e){n.alertEmailsSize.publish(),e.preventDefault()})),t.appendChild(i),t.appendChild(a),t}(n),a=function(n){var t=e('<div class="emails-input__body"></div>'),i=e('<h2 class="title">Share <strong>Board name</strong> with others</h2>');t.appendChild(i);var a=e('<div class="emails-container"></div>');return t.appendChild(a),a.addEventListener("click",(function(e){e.target===a&&n.emailContainerClicked.publish()})),function(n){var t=n.emailsContainerNode,i=n.appEvents;i.emailsUpdated.subscribe((function(n){!function(){for(var e=[],n=t.querySelectorAll(".email-tag"),i=0;i<n.length;i++)e.push(n[i]);if(n.length>0)for(var a,r=function(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return o(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(e,void 0):void 0}}(e))){t&&(e=t);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}(e);!(a=r()).done;){var l=a.value;l.parentNode.removeChild(l)}}(),n.map((function(n){return function(n){var t=n.email,i=n.appEvents,a=e('<span class="email-tag"></span>');t.isValid||a.classList.add("invalid");var o=e('<span class="email-tag__text">'+t.value+"</span>"),r=function(n){var t=n.email,i=n.appEvents,a=e('\n    <span class="email-tag__remove-button" role="button" tabindex="0">\n      <svg width="8" height="8" fill="none">\n        <path\n          fill-rule="evenodd"\n          clip-rule="evenodd"\n          d="M8 .8L7.2 0 4 3.2.8 0 0 .8 3.2 4 0 7.2l.8.8L4 4.8 7.2 8l.8-.8L4.8 4 8 .8z"\n          fill="currentColor"\n        />\n      </svg>\n    </span>\n  ');return a.addEventListener("mousedown",(function(e){i.removeEmail.publish(t),e.preventDefault()})),a.addEventListener("keydown",(function(e){"Enter"===e.key&&(i.removeEmail.publish(t),e.preventDefault())})),a}({email:t.value,appEvents:i});return a.appendChild(o),a.appendChild(r),a}({email:n,appEvents:i})})).reverse().forEach((function(e){t.insertAdjacentElement("afterbegin",e)}))}))}({emailsContainerNode:a,appEvents:n}),function(n){var t=n.emailsContainerNode,i=n.appEvents,a=e('<input class="input" type="text" placeholder="add more peopleâ€¦ " />'),o=e('<input type="hidden" name="emails-input" />');function r(){a.focus()}function l(e){a.value="",i.addNewEmail.publish(e),r()}i.emailsUpdated.subscribe((function(e){var n=e.map((function(e){return e.value})).join(",");o.value=n})),a.addEventListener("paste",(function(e){l((e.clipboardData||window.clipboardData).getData("text")),e.preventDefault()})),a.addEventListener("keydown",(function(e){switch(e.code){case"Backspace":0===a.value.length&&(i.removeLastEmail.publish(),r());break;case"Comma":case"Enter":e.preventDefault(),l(a.value)}})),a.addEventListener("focusout",(function(){a.value.length>0&&l(a.value)})),i.removeEmail.subscribe((function(){r()})),i.emailContainerClicked.subscribe((function(){r()})),t.appendChild(o),t.appendChild(a)}({emailsContainerNode:a,appEvents:n}),t}(n);return t.appendChild(a),t.appendChild(i),t}(d);return t.insertAdjacentElement("afterbegin",f),f}}));
//# sourceMappingURL=emails-input.js.map
